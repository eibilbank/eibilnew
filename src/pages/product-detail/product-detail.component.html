
@switch (status()) {
  @case ('loading') {
    <app-detail-page-skeleton [isProductPage]="true"></app-detail-page-skeleton>
  }
  @case ('success') {
    @if (product(); as p) {
      <!-- Hero Section -->
      <div class="relative h-64 md:h-80 bg-cover bg-center" [style.background-image]="'url(' + p.imageUrl + ')'">
        <div class="absolute inset-0 bg-blue-900 bg-opacity-60"></div>
        <div class="container mx-auto px-6 h-full flex flex-col justify-center relative z-10">
          <nav class="text-sm mb-2 text-white/80">
            <a routerLink="/" class="hover:text-pink-300">Home</a>
            <span class="mx-2">/</span>
            <span>Products</span>
          </nav>
          <h1 class="text-4xl md:text-5xl font-bold text-white leading-tight">{{ p.name }}</h1>
          <p class="text-lg text-pink-200 mt-2">{{ p.tagline }}</p>
        </div>
      </div>

      <!-- Content Section -->
      <div class="bg-blue-50/50 py-16">
        <div class="container mx-auto px-6">
          <div class="bg-white p-8 rounded-2xl shadow-xl">
            <p class="text-gray-700 leading-relaxed text-lg mb-8">{{ p.description }}</p>

            <!-- Tab Navigation -->
            <div class="border-b border-gray-200 mb-6">
              <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                <button (click)="selectTab('features')" 
                        [class]="activeTab() === 'features' ? 'border-pink-500 text-pink-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                  Key Features
                </button>
                <button (click)="selectTab('eligibility')" 
                        [class]="activeTab() === 'eligibility' ? 'border-pink-500 text-pink-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                  Eligibility
                </button>
                <button (click)="selectTab('documents')"
                        [class]="activeTab() === 'documents' ? 'border-pink-500 text-pink-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                  Documents Required
                </button>
                 <button (click)="selectTab('process')"
                        [class]="activeTab() === 'process' ? 'border-pink-500 text-pink-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'"
                        class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                  Application Process
                </button>
              </nav>
            </div>

            <!-- Tab Content -->
            <div class="prose max-w-none">
              @switch (activeTab()) {
                @case ('features') {
                  <ul class="space-y-3 text-gray-700">
                    @for (item of p.features; track item) {
                      <li class="flex items-start !pl-0">
                        <svg class="w-5 h-5 mr-3 text-pink-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                        <span>{{ item }}</span>
                      </li>
                    }
                  </ul>
                }
                @case ('eligibility') {
                   <ul class="space-y-3 text-gray-700">
                    @for (item of p.eligibilityCriteria; track item) {
                       <li class="flex items-start !pl-0">
                        <svg class="w-5 h-5 mr-3 text-green-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span>{{ item }}</span>
                      </li>
                    }
                  </ul>
                }
                @case ('documents') {
                  <ul class="space-y-3 text-gray-700">
                    @for (item of p.documentsRequired; track item) {
                       <li class="flex items-start !pl-0">
                        <svg class="w-5 h-5 mr-3 text-blue-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                        <span>{{ item }}</span>
                      </li>
                    }
                  </ul>
                }
                 @case ('process') {
                   <ol class="space-y-4 text-gray-700">
                    @for (item of p.applicationProcess; track item; let i = $index) {
                      <li class="flex items-start !pl-0">
                        <span class="bg-pink-500 text-white rounded-full w-6 h-6 text-sm font-bold flex items-center justify-center mr-3 flex-shrink-0">{{ i + 1 }}</span>
                        <span>{{ item }}</span>
                      </li>
                    }
                  </ol>
                }
              }
            </div>
          </div>
        </div>
      </div>
    }
  }
  @case ('error') {
    <div class="text-center py-20">
      <h2 class="text-2xl font-bold text-red-600 mb-2">Failed to Load Content</h2>
      <p class="text-gray-600">We couldn't fetch the details for this product. Please try again later.</p>
      <a routerLink="/" class="mt-4 inline-block bg-pink-500 hover:bg-pink-600 text-white font-semibold py-2 px-4 rounded-full">Go to Home</a>
    </div>
  }
}
